# 网络(缓存)

强制缓存如果生效，不需要和服务器发生交互，而对比缓存不管是否生效，都需要与服务器发生交互
两类缓存规则可以同时存在，强制缓存优先级高于对比缓存，也就是说，当执行强制缓存规则时，如果缓存生效，直接使用缓存，不在执行对比缓存规则

## 强制缓存

在缓存数据未生效情况下，可以直接使用缓存数据，浏览器是通过向服务器请求数据是，服务器会将数据和缓存规则一并返回，缓存规则信息包含在响应**header**中。

![image](/image/network/cache/强制缓存.jpeg)

## 对比缓存

又名协商缓存，浏览器第一次请求数据，服务器会将缓存标识与数据一起返回给客户端，客户端会将两者备份至缓存数据库中，再次请求时，客户端将备份的缓存标识发送给服务器，服务器根据缓存标识进行判断，判断成功会返回304状态码，通知客户端比较成功，可以使用缓存数据。

![image](/image/network/cache/对比缓存.jpeg)

### 第一次请求时

![image](/image/network/cache/流程.jpeg)

### 第二次请求时

![image](/image/network/cache/缓存整体图2.jpeg)
![image](/image/network/cache/缓存整体图1.jpeg)

## 通过最后修改时间来判断缓存是否可用

## 最后修改时间存在问题

## ETag

## 如果不发请求(强制缓存)

